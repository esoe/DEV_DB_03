# Замечания / комментарии
Про 2НФ из слайдов: «Для приведения отношения к 2НФ следует выделить неключевые атрибуты, которые зависят только от части первичного ключа и перенести их в новое отношение вместе с той частью ключа, от которой они зависят».
По вашим коментариям к построению 2НФ:
- про "Удаляем дублирующиеся строки ..." там ничего не сказано;
- "При заполнении формы пользователем, он будет галочками (Checkbox) указывать к каким состояниям может относиться контрагент..." — это вообще детали реализации пользовательского интерфейса, которые к нормализации отношения не имеют.

После перехода от 1НФ ко 2НФ у вас должно остаться исходное отношение, но часть его атрибутов будет вынесена в отдельное отношение — та часть, которая зависит от части первичного ключа исходного отношения. При этом во 2НФ в исходном отношении первичный ключ, обозначенный в 1НФ, должен остаться, он не может распасться.

Ранее:
Выбор первичного ключа в 1НФ странный, но ОК, пусть будет такой.

Не понятно, как получилась 2НФ. Здесь должны образоваться таблицы с атрибутами, которые зависят от части первичного ключа (вместе с этими атрибутами) исходного отношения. Напишите в комментариях, как вы получили 2НФ. Например, так: "Атрибуты такие-то и такие-то зависят от наименования контрагента, поэтому выносим их в таблицу Контрагенты" и т.п.

В 3НФ потерялся вид контрагента.

# Построение 2-й нормальной формы
1. Перенес неключевые атрибуты в отношения соответствующие части первичного ключа. Получил преобразованную Исходную таблицу, состоящую из трех столбцов (частей первичного ключа) и три отношения: contragents, types, contacts

## Аномалии 2 нормальной формы
Так понимаю основная речь при модификации структуры данных должна вестись об имеющихся аномалиях. Итак, что видим:
### Избыточность
"Город" и "код города" несут одну и ту же информацию. Однако функционально эта информация применяется по разному. Код города лучше оставить в отношении "contacts". Изменил первую нормальную форму, код города отнес к PK-part-3, отношению contacts.

### Модификация
> Необходимость изменения одного значения приводит к необходимости просмотра всей таблицы (для исключения противоречий)

При изменении работника на какой-то дожности контакта, изменится ФИО работника, остальные данные останутся неизменны.
Должность и номер телефона связаны функционально, а ФИО сотрудника это переменная величина (сотрудники в реальных организациях меняются гораздо чаще контактной информации). Однако в реальных условиях ФИО не достаточно, чтобы идентифицировать человека, ФИО работника не подлежит перемещению в отдельное отношение.
Данные о должности, номере телефона (в исходной таблице указаны городские номера, скорее всего имелись ввиду корпоративные, хотя могут указываться и персональные контакты) относятся именно к организации, а не к контакту. Так как есть некоторая неопределенность, оставлю структуру данных как было выбрано ранее.

### Удаление
>  Состоит в том, что удаление данных из таблицы приводит к удалению информации не связанной напрямую с удаляемыми данными.

Тут скорее вопрос к методу удаления, а не аномалии данных. Можно при удалении поместить в поле значение null, либо иное типовое значение "пусто". Не обязательно удалять всю строку.
- При удалении организации нужно будет удалять данные из трех отношений.
- при удалении/модификации должности (изменилась оргструктура контрагента), если должность сотрудника изменилась, нужно будет менять  данные отношения contacts
- ... в общем не вижу аномалий удаления данных.

### Вставка
> Нельзя добавить одни данные без наличия других или же для вставки данных необходимо просмотреть всю таблицу (для исключения противоречий)

- Можем независимо добавлять организации
- Можем независимо добавлять контактных лиц
- можем отдельно наполянть классификаторы по городам, должностям.

При вставке новых записей, в ситуации, когда один и тот же человек представляет контрагента как поставщик и как потребитель, будут появляться дополнительные строки в исходном отношении, равно как и при появлении нескольких офисов у одного контрагента, или нескольких сотрудников, представляющих офис.

Связанных с этим типом аномалий изменений структуры данных не предусмотрено.

# Построение 3-й нормальной формы
> ни один неключевой атрибут не должен функционально зависеть от другого неключевого атрибута

"Функционально" - как понимаю, имеется в виду функциональность при работе с данными (добавление, удаление, модификация).
Когда вынес (при построении второй нормальной формы) в отдельные отношения position, sity как раз это и пытался реализовать.

